(this.webpackJsonpspotifypartyfront=this.webpackJsonpspotifypartyfront||[]).push([[0],{46:function(e,t,a){e.exports=a(60)},51:function(e,t,a){},52:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(15),r=a.n(c),s=(a(51),a(16)),o=a(17),i=a(23),u=a(22),m=a(68),h=a(69),g=a(66),b=a(67),p=a(43),d=a(42);a(52),window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});window.location.hash="";a(53);var f=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this)).state={user:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.props.user!==this.state.user&&this.setState({user:this.props.user})}},{key:"render",value:function(){return l.a.createElement(m.a,{className:"topheader",bg:"light",expand:"lg"},l.a.createElement(m.a.Brand,{className:"brandLogo",href:"/"},"Spotify Party"),l.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(h.a,{className:"mr-auto"},l.a.createElement(h.a.Link,{href:"#home"},"Home"),l.a.createElement(h.a.Link,{href:"#link"},"Link")),null===this.state.user?l.a.createElement(h.a,{className:"ml-auto logintag"},l.a.createElement(h.a.Link,{href:"/login"},"Login with Spotify")):l.a.createElement(h.a,{className:"ml-auto"},l.a.createElement(g.a,{className:"myaccountTag",title:"My Account",id:"basic-nav-dropdown"},l.a.createElement(g.a.Item,{href:"#"},"Hello, ",this.state.user),l.a.createElement(g.a.Item,{href:"#"},"Preferences"),l.a.createElement(g.a.Divider,null),l.a.createElement(g.a.Item,{href:"#"},"Log out"))),l.a.createElement(b.a,{inline:!0,className:"searchButton"},l.a.createElement(p.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),l.a.createElement(d.a,{variant:"outline-success"},"Search"))))}}]),a}(l.a.Component),y=(a(58),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this)).getMusicInfo=function(){console.log("Fetching playback info..."),fetch("/getplayback").then((function(e){return e.json().then((function(e){console.log("res is:",e),null!==e&&void 0!==e&&(console.log("Fetched!"),n.setState({item:e.item,refreshToggled:!1,playback:e.is_playing}))}))}))},n.playpausePlayback=function(e){console.log("Playing/pausing playback..."),fetch("/"+e).then((function(e){return e.json().then((function(e){null!==e&&(console.log("Done!: ",e),n.setState({playbackCommandtrigger:!1}))}))}))},n.changePlayback=function(e){console.log("Changing playback..."),fetch("/"+e).then((function(e){return e.json().then((function(e){null!==e&&(console.log("Fetched!: ",e),n.setState({refreshToggled:!0,changePlaybackTrigger:!1}))}))}))},n.state={user:null,loggedIn:!1,item:null,refreshToggled:!1,playbackCommandtrigger:!1,changePlaybackTrigger:!1,changePlayback:null,playback:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.props.user!==this.state.user&&(this.setState({user:this.props.user,loggedIn:!0}),this.getMusicInfo()),this.state.refreshToggled&&(console.log("Refreshed"),this.getMusicInfo()),this.state.playbackCommandtrigger&&(console.log("Triggered Play/pause"),!0===this.state.playback?(console.log("play"),this.playpausePlayback("play")):(console.log("pause"),this.playpausePlayback("pause"))),this.state.changePlaybackTrigger&&(console.log("Command:",this.state.changePlayback),2===this.state.changePlayback?(console.log("next song"),this.changePlayback("next")):1===this.state.changePlayback&&(console.log("previous song"),this.changePlayback("previous")))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{id:"mygroups",className:"col-2 border"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("h2",null,"My groups"))),l.a.createElement("div",{className:"col-7"},l.a.createElement("div",{className:"row nowplaying border"},l.a.createElement("div",{className:"col-6"},null===this.state.item||void 0===this.state.item?l.a.createElement("div",null,l.a.createElement("h2",null,"Now Playing: [Nothing is playing]"),l.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.setState({refreshToggled:!0})}},"Refresh")):l.a.createElement("div",null,l.a.createElement("h2",null,"Now Playing:"),l.a.createElement("h5",null,this.state.item.name),l.a.createElement("h6",null,"Artist: ",this.state.item.artists[0].name),l.a.createElement("h6",null,"Album: ",this.state.item.album.name),l.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.setState({changePlaybackTrigger:!0,changePlayback:1})}},"Previous"),l.a.createElement("button",{className:"btn btn-warning",onClick:function(){return e.setState({refreshToggled:!0})}},"Refresh"),this.state.playback?l.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.setState({playbackCommandtrigger:!0,playback:!1})}},"Pause"):l.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.setState({playbackCommandtrigger:!0,playback:!0})}},"Play"),l.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.setState({changePlaybackTrigger:!0,changePlayback:2})}},"Next"))),l.a.createElement("div",{className:"col-6"},null===this.state.item||void 0===this.state.item?l.a.createElement("h2",null):l.a.createElement("div",null,l.a.createElement("img",{src:"".concat(this.state.item.album.images[1].url),alt:"Cover"})))),l.a.createElement("div",{className:"row nextup border"},l.a.createElement("h2",null,"Next up:"))),l.a.createElement("div",{id:"chat",className:"col-3 border"},l.a.createElement("h2",null,"Chat")))}}]),a}(l.a.Component)),k=(a(59),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={loggedIn:!1,userState:null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("fetching getUser..."),fetch("/getUser").then((function(t){return t.json().then((function(t){t!==e.state.userState&&(console.log("Fetched!"),e.setState({userState:t}))}))}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(f,{user:this.state.userState}),l.a.createElement(y,{user:this.state.userState}))}}]),a}(l.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.b1c4c316.chunk.js.map